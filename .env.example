# ============================================================================
# Gov Contracts AI - Centralized Environment Configuration
# ============================================================================
#
# This file contains ALL environment variables for ALL services.
# Copy this file to .env and customize the values.
#
# Usage:
#   cp .env.example .env
#   vim .env  # Edit with your values
#
# All docker-compose service files reference this centralized .env
#
# ============================================================================
# Docker Compose Configuration
# ============================================================================
COMPOSE_PROJECT_NAME=gov-contracts-ai

# ============================================================================
# Database Configuration
# ============================================================================
# IMPORTANT: Service endpoint configuration:
#   - Scripts/Host:         POSTGRES_SERVER=localhost, POSTGRES_PORT=5433
#   - Docker containers:    POSTGRES_SERVER=postgres, POSTGRES_PORT=5432
#   - Remote PostgreSQL:    POSTGRES_SERVER=your-db-server.com, POSTGRES_PORT=5432
#
# The application will auto-detect the environment and use appropriate defaults.

POSTGRES_SERVER=localhost
POSTGRES_PORT=5433
POSTGRES_USER=admin
POSTGRES_PASSWORD=dev123
POSTGRES_DB=govcontracts

# Docker-specific settings
POSTGRES_INITDB_ARGS=--encoding=UTF8 --locale=en_US.UTF-8
PGDATA=/var/lib/postgresql/data/pgdata

# ============================================================================
# Redis Configuration
# ============================================================================
# IMPORTANT: Service endpoint configuration:
#   - Scripts/Host:         REDIS_HOST=localhost, REDIS_PORT=6380
#   - Docker containers:    REDIS_HOST=redis, REDIS_PORT=6379
#   - Remote Redis:         REDIS_HOST=your-redis-server.com, REDIS_PORT=6379

REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=change_me_in_production

# Docker-specific settings
REDIS_MAXMEMORY=2gb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ============================================================================
# MLflow Configuration
# ============================================================================
# IMPORTANT: Service endpoint configuration:
#   - Scripts/Host:         MLFLOW_TRACKING_URI=http://localhost:5000
#   - Docker containers:    MLFLOW_TRACKING_URI=http://mlflow:5000
#   - Remote MLflow:        MLFLOW_TRACKING_URI=http://your-mlflow-server.com:5000

MLFLOW_TRACKING_URI=http://localhost:5000

# ============================================================================
# OpenSearch Configuration
# ============================================================================
# IMPORTANT: Service endpoint configuration:
#   - Scripts/Host:         OPENSEARCH_HOST=localhost, OPENSEARCH_PORT=9201
#   - Docker containers:    OPENSEARCH_HOST=opensearch, OPENSEARCH_PORT=9200
#   - Remote OpenSearch:    OPENSEARCH_HOST=your-opensearch-server.com, OPENSEARCH_PORT=9200

OPENSEARCH_HOST=localhost
OPENSEARCH_PORT=9201
OPENSEARCH_USER=admin
OPENSEARCH_PASSWORD=admin

# ============================================================================
# MinIO Configuration (Local S3)
# ============================================================================
# IMPORTANT: Use different endpoints depending on where code runs:
#   - Scripts/Host:         MINIO_ENDPOINT_URL=http://localhost:9000
#   - Docker containers:    MINIO_ENDPOINT_URL=http://minio:9000
#   - Remote MinIO server:  MINIO_ENDPOINT_URL=http://your-minio-server:9000
#
# The application will auto-detect and use the appropriate endpoint.
# For Docker, Airflow compose.yml overrides this to use 'minio' service name.

MINIO_ENDPOINT_URL=http://localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_BROWSER=on
MINIO_REGION_NAME=us-east-1

# MinIO Buckets (Data Lake Layers)
BUCKET_BRONZE=govcontracts-bronze
BUCKET_SILVER=govcontracts-silver
BUCKET_GOLD=govcontracts-gold

# API Keys (Add your own)
ANTHROPIC_API_KEY=your_anthropic_key_here
OPENAI_API_KEY=your_openai_key_here
PINECONE_API_KEY=your_pinecone_key_here
PINECONE_ENVIRONMENT=your_pinecone_env_here

# AWS Configuration (for production)
AWS_ACCESS_KEY_ID=your_aws_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_here
AWS_REGION=us-east-1
S3_BUCKET=govcontracts-ml-artifacts

# ============================================================================
# Airflow Configuration
# ============================================================================
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__FERNET_KEY=""
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://admin:dev123@postgres:5432/airflow
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://admin:dev123@postgres:5432/airflow
AIRFLOW__CELERY__BROKER_URL=redis://:@redis:6379/0
AIRFLOW__WEBSERVER__SECRET_KEY=govcontracts-secret-key-change-in-prod
AIRFLOW__API__SECRET_KEY=e55abc044a495dd51a482c0173c3bd4b1e272a2ee76c63c1c3a3fca1259d968f
AIRFLOW_UID=50000

# Airflow Directory Paths
# IMPORTANT: Use ABSOLUTE paths customized for each machine
# Do NOT use relative paths - Docker Compose resolves them incorrectly
#
# Examples:
#   Machine 1 (WSL):    AIRFLOW_DAGS_PATH=/home/geda/gov-contracts-ai/airflow/dags
#   Machine 2 (Server): AIRFLOW_DAGS_PATH=/var/app/gov-contracts-ai/airflow/dags
#
# Replace '/path/to' with your actual project location:
AIRFLOW_DAGS_PATH=/path/to/gov-contracts-ai/airflow/dags
AIRFLOW_LOGS_PATH=/path/to/gov-contracts-ai/airflow/logs
AIRFLOW_PLUGINS_PATH=/path/to/gov-contracts-ai/airflow/plugins
AIRFLOW_CONFIG_PATH=/path/to/gov-contracts-ai/airflow/config
BACKEND_PATH=/path/to/gov-contracts-ai/backend

# ============================================================================
# Application Configuration
# ============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
TZ=America/Sao_Paulo

# Monitoring
SENTRY_DSN=your_sentry_dsn_here
